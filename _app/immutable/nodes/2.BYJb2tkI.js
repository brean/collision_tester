var it=Object.defineProperty;var j=t=>{throw TypeError(t)};var rt=(t,e,s)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var y=(t,e,s)=>rt(t,typeof e!="symbol"?e+"":e,s),J=(t,e,s)=>e.has(t)||j("Cannot "+s);var I=(t,e,s)=>(J(t,e,"read from private field"),s?s.call(t):e.get(t)),Y=(t,e,s)=>e.has(t)?j("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),$=(t,e,s,r)=>(J(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);import{t as nt,a as ot}from"../chunks/BAb1uvXp.js";import{s as B,k as H,o as lt,p as ct,$ as ht,a0 as ft,a1 as vt,h as E,a2 as dt,a3 as ut,a4 as _t,u as gt,r as yt,K as xt,g as bt,f as mt,_ as v,X as pt,L as Pt,R as Mt,a5 as It,a6 as wt,a7 as kt,Y as K,Z as U,a8 as Et}from"../chunks/CAx95EQE.js";import{d as St,s as V}from"../chunks/KLVGm2mf.js";import{b as X}from"../chunks/CV4kXVch.js";let q=!1;function Z(){q||(q=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const s of t.target.elements)(e=s.__on_r)==null||e.call(s)})},{capture:!0}))}function Lt(t){var e=lt,s=ct;B(null),H(null);try{return t()}finally{B(e),H(s)}}function At(t,e,s,r=s){t.addEventListener(e,()=>Lt(s));const a=t.__on_r;a?t.__on_r=()=>{a(),r(!0)}:t.__on_r=()=>r(!0),Z()}const Ct=Symbol("is custom element"),Tt=Symbol("is html");function D(t){if(E){var e=!1,s=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;g(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var a=t.checked;g(t,"checked",null),t.checked=a}}};t.__on_r=s,ut(s),Z()}}function g(t,e,s,r){var a=Nt(t);E&&(a[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||a[e]!==(a[e]=s)&&(e==="loading"&&(t[ht]=s),s==null?t.removeAttribute(e):typeof s!="string"&&Rt(t).includes(e)?t[e]=s:t.setAttribute(e,s))}function Nt(t){return t.__attributes??(t.__attributes={[Ct]:t.nodeName.includes("-"),[Tt]:t.namespaceURI===ft})}var G=new Map;function Rt(t){var e=G.get(t.nodeName);if(e)return e;G.set(t.nodeName,e=[]);for(var s,r=t,a=Element.prototype;a!==r;){s=dt(r);for(var l in s)s[l].set&&e.push(l);r=vt(r)}return e}function W(t,e,s=e){var r=_t();At(t,"input",a=>{var l=a?t.defaultValue:t.value;if(l=w(t)?k(l):l,s(l),r&&l!==(l=e())){var h=t.selectionStart,f=t.selectionEnd;t.value=l??"",f!==null&&(t.selectionStart=h,t.selectionEnd=Math.min(f,t.value.length))}}),(E&&t.defaultValue!==t.value||gt(e)==null&&t.value)&&s(w(t)?k(t.value):t.value),yt(()=>{var a=e();w(t)&&a===k(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function w(t){var e=t.type;return e==="number"||e==="range"}function k(t){return t===""?null:+t}var Ot=nt('<div style="display: inline-block; vertical-align: top; margin-right: 20px;">Robot space<br> <canvas width="500" height="500" class="svelte-6m66rb"></canvas></div> <div style="display: inline-block; vertical-align: top;">configuration space<br> <canvas width="500" height="500" class="svelte-6m66rb"></canvas></div> <br> upper arm angle: <input type="range"> <button>0</button> <br> forearm angle: <input type="range"> <button>0</button> <br>',1);function Kt(t,e){var m;xt(e,!0);const s=100;let r,a,l,h,f;class S{constructor(i){Y(this,m);y(this,"color");y(this,"x");y(this,"y");y(this,"length");y(this,"child");this.color=i.color||"green",this.x=i.x||0,this.y=i.y||0,this.child=i.child,this.length=i.length||s,$(this,m,wt(kt(i.angle||Math.PI/4)))}get angle(){return Mt(I(this,m))}set angle(i){It(I(this,m),i,!0)}getEndPosition(){const i=this.x+this.length*Math.cos(this.angle),o=this.y-this.length*Math.sin(this.angle);return{x:i,y:o}}draw(i,o){this.x=i,this.y=o;const n=this.getEndPosition();a.lineWidth=3,a.beginPath(),a.moveTo(this.x,this.y),a.lineTo(n.x,n.y),a.stroke(),a.beginPath(),a.arc((this.x+n.x)/2,(this.y+n.y)/2,10,0,Math.PI*2),a.fillStyle=this.color,a.fill(),a.beginPath(),a.arc(n.x,n.y,5,0,Math.PI*2),a.fillStyle="black",a.strokStyle="black",a.fill(),this.child&&this.child.draw(n.x,n.y)}arcPos(){const i=this.getEndPosition();return{x:(this.x+i.x)/2,y:(this.y+i.y)/2}}isInsideJoint(i){const o=this.arcPos(),n=i.x-o.x,_=i.y-o.y;return n*n+_*_<=10*10}}m=new WeakMap;class z{constructor(i){y(this,"vertices");this.vertices=i}draw(i,o){a.fillStyle="gray",a.beginPath(),a.moveTo(this.vertices[0].x+i,this.vertices[0].y+o);for(let n=1;n<this.vertices.length;n++)a.lineTo(this.vertices[n].x+i,this.vertices[n].y+o);a.closePath(),a.fill()}isColliding(i){let o=!1;for(let n=0,_=this.vertices.length-1;n<this.vertices.length;_=n++){const R=this.vertices[n].x,M=this.vertices[n].y,at=this.vertices[_].x,O=this.vertices[_].y;M>i.y!=O>i.y&&i.x<(at-R)*(i.y-M)/(O-M)+R&&(o=!o)}return o}}let d=new S({length:s*.8}),u=new S({child:d,color:"blue"}),F=[new z([{x:20,y:20},{x:80,y:50},{x:50,y:80}])];function L(){a.clearRect(0,0,r.width,r.height),F.forEach(c=>{c.draw(r.width/2,r.height/2)}),u.draw(r.width/2,r.height/2),h.clearRect(0,0,l.width,l.height),h.beginPath(),h.arc((u.angle+Math.PI)*l.width/(Math.PI*2),(d.angle+Math.PI)*l.height/(Math.PI*2),10,0,Math.PI*2),h.fillStyle="black",h.fill()}function Q(){if(!l||!r||!h&&(h=l.getContext("2d"),!h)||!a&&(a=r.getContext("2d"),!a))return;r.addEventListener("pointerdown",i=>{const o=c(r,i);d.isInsideJoint(o)?f=d:u.isInsideJoint(o)&&(f=u)}),r.addEventListener("pointerup",()=>{f=void 0}),r.addEventListener("pointermove",i=>{if(f){const o=c(r,i),n=o.x-f.x,_=o.y-f.y;f.angle=Math.atan2(-_,n),L()}});function c(i,o){const n=i.getBoundingClientRect();return{x:o.clientX-n.left,y:o.clientY-n.top}}L()}bt(Q);var A=Ot(),p=mt(A),tt=v(K(p),3);X(tt,c=>r=c,()=>r),U(p);var P=v(p,2),et=v(K(P),3);X(et,c=>l=c,()=>l),U(P);var x=v(P,4);D(x),g(x,"min",-Math.PI),g(x,"max",Math.PI),g(x,"step",.01);var C=v(x,2);C.__click=()=>{d.angle=0};var T=v(C),b=v(T,3);D(b),g(b,"min",-Math.PI),g(b,"max",Math.PI),g(b,"step",.01);var N=v(b,2);N.__click=()=>{u.angle=0};var st=v(N);Et(),pt((c,i)=>{V(T,` ${c??""}`),V(st,` ${i??""}`)},[()=>Math.round(d.angle*1800/Math.PI)/10,()=>Math.round(u.angle*1800/Math.PI)/10]),W(x,()=>d.angle,c=>d.angle=c),W(b,()=>u.angle,c=>u.angle=c),ot(t,A),Pt()}St(["click"]);export{Kt as component};
